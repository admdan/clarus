<!doctype html>
<html>
<head>
    <title>Edit Troubleshooting Ticket</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

    <h1>Edit Ticket #{{ ticket.id }}</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul>
        {% for category, message in messages %}
          <li><strong>{{ category }}:</strong> {{ message }}</li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <form method="post">
        <label>User:</label>
        <input type="text" name="user_name" value="{{ ticket.user_name }}">

        <label>Device ID:</label>
        <input type="text" name="device_id" value="{{ ticket.device_id }}">

        <label>Device Type</label>
        <select name="device_type" id="device_type">
            <option value="Desktop" {% if ticket.device_type == 'Desktop' %}selected{% endif %}>Desktop</option>
            <option value="Laptop" {% if ticket.device_type == 'Laptop' %}selected{% endif %}>Laptop</option
            <option value="Printer" {% if ticket.device_type == 'Printer' %}selected{% endif %}>Printer</option>
            <option value="Router" {% if ticket.device_type == 'Router' %}selected{% endif %}>Router</option>
            <option value="Switch" {% if ticket.device_type == 'Switch' %}selected{% endif %}>Switch</option>
            <option value="Mobile" {% if ticket.device_type == 'Mobile' %}selected{% endif %}>Mobile</option>
            <option value="Tablet" {% if ticket.device_type == 'Tablet' %}selected{% endif %}>Tablet</option>
            <option value="Other" {% if ticket.device_type == 'Other' %}selected{% endif %}>Other</option>
        </select>

        <label>Issue:</label>
        <textarea name="issue_description" > {{ ticket.issue_description }}</textarea>

        <label>Troubleshooting</label><br>
        <textarea name="troubleshooting">{{ ticket.troubleshooting or '' }}</textarea><br>

        <label for="priority">Priority:</label>
        <select name="priority" id="priority">
            <option value="Low">Low</option>
            <option value="Medium">Medium</option>
            <option value="High">High</option>
        </select>

        <label>Status</label><br>
        <select name="status">
            <option value="Open" {% if ticket.status == 'Open' %}selected{% endif %}>Open</option>
            <option value="In Progress" {% if ticket.status == 'In Progress' %}selected{% endif %}>In Progress</option>
            <option value="Resolved" {% if ticket.status == 'Resolved' %}selected{% endif %}>Resolved</option>
        </select><br>

        <label>Category:</label><label for="category">Category:</label>
        <select name="category" id="category">
            <option value="Hardware" {% if ticket.category == 'Hardware' %}selected{% endif %}>Hardware</option>
            <option value="Software" {% if ticket.category == 'Software' %}selected{% endif %}>Software</option>
            <option value="Network" {% if ticket.category == 'Network' %}selected{% endif %}>Network</option>
            <option value="Security" {% if ticket.category == 'Security' %}selected{% endif %}>Security</option>
            <option value="Access Request" {% if ticket.category == 'Access Request' %}selected{% endif %}>Access Request</option>
            <option value="General Support" {% if ticket.category == 'General Support' %}selected{% endif %}>General Support</option>
        </select>


        <label>Assigned to:</label>
        <input type="text" name="assigned_to" value="{{ ticket.assigned_to or '' }}">

        <label>Due date:</label>
        <input type="date" name="due_date" value="{{ ticket.due_date.strftime('%Y-%m-%d') if ticket.due_date else '' }}">

        <input type="submit" value="Update">
    </form>

    <br>
    <a href="{{ url_for('troubleshooting.troubleshooting_dashboard') }}">Back to Dashboard</a>
</body>
</html>
